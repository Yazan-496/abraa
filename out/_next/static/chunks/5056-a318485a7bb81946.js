(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5056],{51067:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return h}});var n=a(85893),i=a(67294),o=a(87536),l=a(14416),c=a(50450),s=a(50304),r=a(92015);let u=(t,e,a,n)=>{let i=new FormData;return i.append("file",a),i.append("file_name",t),i.append("custom_file_path",e),r.b.post("".concat("https://upload.wikimedia.org/wikipedia/en/thumb/e/e2/IMG_Academy_Logo.svg/1200px-IMG_Academy_Logo.svg.png","/api/v1/upload_file"),i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n})};var d=a(60141),p={src:"/_next/static/media/file.73a8a554.png",height:200,width:200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAFVBMVEUAAAAAAAAAAAAAAABMaXEAAAAAAACvHJC4AAAAB3RSTlMrIz0cAFASE5pIqgAAAAlwSFlzAAALEwAACxMBAJqcGAAAADBJREFUeJwtyUEOwEAMArEhQP7/5FWq3iyZrEQSgj0cRNv5MAM/pBBPywHbe7VIbB4XyACoTEAfcgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8};function v(t){let{open:e,handleClose:a,handleFinishUpLoadSuccessfully:o,handleAdd:l,dialogTitle:s,folder:r,pathupload:v}=t,[h,b]=(0,i.useState)(void 0),[f,g]=(0,i.useState)(void 0),[m,_]=(0,i.useState)(void 0),[A,x]=(0,i.useState)(0),[y,S]=(0,i.useState)(""),[k,w]=(0,i.useState)(""),[j,E]=(0,i.useState)([]),N=t=>{b(t.target.files),console.log(t.target.value,"event.target.files")},I=()=>{w(""),S(""),l(j)},D=t=>null!==t.match(/\.(jpeg|jpg|gif|png)$/),R=()=>{let t=h[0];x(0),_(t),void 0!==v&&u(t.name.split(".")[0],"collection1/".concat(r),t,t=>{x(Math.round(100*t.loaded/t.total))}).then(t=>(E(t.data.file_path),w("".concat("https://upload.wikimedia.org/wikipedia/en/thumb/e/e2/IMG_Academy_Logo.svg/1200px-IMG_Academy_Logo.svg.png").concat(t.data.file_path)),o("".concat("https://upload.wikimedia.org/wikipedia/en/thumb/e/e2/IMG_Academy_Logo.svg/1200px-IMG_Academy_Logo.svg.png").concat(t.data.file_path)),S("uploaded successfully"),g(1),t.data)).catch(()=>{x(0),_(void 0)})};return(0,n.jsxs)(c.u_,{centered:!0,isOpen:e,children:[(0,n.jsxs)(c.xB,{closeButton:!0,id:"form-dialog-title",children:[(0,n.jsx)("span",{onClick:a,style:{position:"absolute",right:"21px",cursor:"pointer"},children:"x"}),s]}),(0,n.jsx)(c.fe,{id:"form-dialog-title",children:(0,n.jsxs)("div",{children:[m&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"text-center",children:[A,"%"]}),(0,n.jsx)(c.Ex,{value:A})]}),(0,n.jsx)("label",{className:"btn btn-default",children:(0,n.jsx)("input",{type:"file",onChange:N})}),(0,n.jsx)("div",{className:"alert alert-light",role:"alert",children:y}),(0,n.jsxs)("div",{children:[k&&!D(k)&&(0,n.jsx)(d.Z,{src:p,width:"250px",height:"150px"}),D(k)&&(0,n.jsx)(d.Z,{src:k,width:"250px",height:"150px"})]})]})}),(0,n.jsxs)(c.mz,{children:[(0,n.jsx)("button",{className:"btn btn-primary",disabled:!h,onClick:R,children:"Upload"}),(0,n.jsx)("button",{closeButton:!0,className:"btn btn-primary",disabled:!f,onClick:t=>I(j),children:"add"})]})]})}var h=function(t){var e,a,r;let u;(0,l.v9)(t=>{var e;return null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.languages}),(0,l.v9)(t=>{var e;return null==t?void 0:null===(e=t.app)||void 0===e?void 0:e.loading});let{register:d,errors:p,handleSubmit:h,control:b}=(0,o.cI)(),[f,g]=(0,i.useState)((null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.id)!==0),[m,_]=(0,i.useState)(!0),[A,x]=(0,i.useState)(0),[y,S]=(0,i.useState)(0),[k,w]=(0,i.useState)([]),[j,E]=(0,i.useState)([]),[N,I]=(0,i.useState)(!1);(0,i.useEffect)(()=>{var e,a;console.log(null==t?void 0:t.data,"props"),w(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.attributes),(0,s.HV)(null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.id,t=>{console.log(t,"attributes")})},[]);let D=t=>{(null==j?void 0:j.length)===0&&(null==t||t.automated_attribute_values.map(t=>{j.push({label:t.string_value,value:t.id})}))},R=()=>{_(!1),t.onClose()},T=t=>{console.log(t),I(!1),B(t)},M=()=>{I(!1)},U=()=>{I(!0)},C=t=>{},[O,B]=(0,i.useState)(null),{fields:G,append:z,remove:J}=(0,o.Dq)({control:b,name:"kyc_level_translations"});(0,i.useEffect)(()=>{var e,a,n,i,o,l;(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.photo_path)&&B(null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.photo_path),(null==t?void 0:null===(a=t.data)||void 0===a?void 0:null===(n=a.kyc_level_translations)||void 0===n?void 0:n.length)>0&&(null==t||null===(o=t.data)||void 0===o||null===(l=o.kyc_level_translations)||void 0===l||l.map(t=>z(t)))},[]);let[L,P]=(0,i.useState)({}),F=t=>{var e;console.log("atrributeValue",u),"input"===u||"file"===u?t={string_value:t.phone,int_value:1,attribute_id:2,attribute_value_type_id:2,role_id:1}:"select"===u&&(t={automated_attribute_value_id:null==t?void 0:null===(e=t.prefered)||void 0===e?void 0:e.value,int_value:1,attribute_id:2,attribute_value_type_id:2,role_id:1}),(0,s.Ps)(t,()=>{R()},t=>{if(t){let e={};for(let a in t)null!==t[a]&&(e[a]=t[a][0]);P(e)}})};return(0,n.jsx)(c.u_,{isOpen:m,toggle:R,unmountOnClose:!0,backdrop:!0,className:"sidebar-lg",style:{width:"502px"},contentClassName:"p-0",modalClassName:"modal-slide-in sidebar-todo-modal",children:(0,n.jsxs)(c.l0,{action:"/",className:"flex-grow-1 d-flex flex-column",onSubmit:h(F),children:[(0,n.jsxs)(c.xB,{toggle:R,className:"mb-1",children:["KYC Modal For : "," ",null==t?void 0:null===(a=t.data)||void 0===a?void 0:null===(r=a.kyc_level_translation)||void 0===r?void 0:r.name]}),(0,n.jsx)(c.fe,{className:"flex-grow-1 pb-sm-0 pb-3 modal-body",children:k.map(t=>{var e,a,i,l,s,r,d,p,h,f,g,m,_,A,x,y;return(null==t?void 0:null===(e=t.attribute_type)||void 0===e?void 0:e.name)==="input"?(u=null==t?void 0:null===(l=t.attribute_type)||void 0===l?void 0:l.name,(0,n.jsxs)(c.cw,{children:[(0,n.jsx)(c.__,{className:"form-label",for:"".concat(null===(s=null==t?void 0:t.attribute_translations[0])||void 0===s?void 0:s.name).substring(0,5),children:null===(r=null==t?void 0:t.attribute_translations[0])||void 0===r?void 0:r.name}),(0,n.jsx)(o.Qr,{as:c.II,name:"".concat(null===(d=null==t?void 0:t.attribute_translations[0])||void 0===d?void 0:d.name).substring(0,5),id:"".concat(null===(p=null==t?void 0:t.attribute_translations[0])||void 0===p?void 0:p.name).substring(0,5),control:b,type:(null===(h=null==t?void 0:t.attribute_translations[0])||void 0===h?void 0:h.name)==="phone number"?"number":"text"})]})):(null==t?void 0:null===(a=t.attribute_type)||void 0===a?void 0:a.name)==="select"?(D(t),u=null==t?void 0:null===(f=t.attribute_type)||void 0===f?void 0:f.name,(0,n.jsxs)(c.cw,{children:[(0,n.jsx)(c.__,{className:"form-label",for:"".concat(null===(g=null==t?void 0:t.attribute_translations[0])||void 0===g?void 0:g.name).substring(0,8),children:null===(m=null==t?void 0:t.attribute_translations[0])||void 0===m?void 0:m.name}),(0,n.jsx)(o.Qr,{as:Select,name:"".concat(null===(_=null==t?void 0:t.attribute_translations[0])||void 0===_?void 0:_.name).substring(0,8),id:"".concat(null===(A=null==t?void 0:t.attribute_translations[0])||void 0===A?void 0:A.name).substring(0,8),control:b,options:j})]})):(null==t?void 0:null===(i=t.attribute_type)||void 0===i?void 0:i.name)==="image"?(u=null==t?void 0:null===(x=t.attribute_type)||void 0===x?void 0:x.name,(0,n.jsxs)(c.cw,{children:[(0,n.jsx)(c.__,{className:"form-label",for:"icon",children:null===(y=null==t?void 0:t.attribute_translations[0])||void 0===y?void 0:y.name}),(0,n.jsx)(o.Qr,{render:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{pathupload:"",open:N,handleClose:M,handleFinishUpLoadSuccessfully:C,handleAdd:T,dialogTitle:"upload Image",fileName:"file_name",folder:"channels"}),(0,n.jsx)("div",{className:"box",onClick:t=>U(t),style:{padding:"7px",width:"100%",textAlign:"center",height:"60px",color:"blue",cursor:"pointer"},children:"click here to upload an image"}),(0,n.jsx)("div",{children:O&&(0,n.jsx)("img",{src:"".concat("https://upload.wikimedia.org/wikipedia/en/thumb/e/e2/IMG_Academy_Logo.svg/1200px-IMG_Academy_Logo.svg.png").concat(O),width:"100px",height:"100px"})})]}),control:b,id:"icon",name:"icon"})]})):void 0})}),(0,n.jsxs)(c.mz,{className:"justify-content-center",children:[(0,n.jsx)(c.zx,{type:"submit",className:"flex-grow-1",color:"primary",children:(0,n.jsx)("span",{children:"Submit"})}),(0,n.jsx)(c.zx,{type:"button",className:"flex-grow-1",color:"secondary",onClick:R,children:(0,n.jsx)("span",{children:"Cancel"})})]})]})})}},50304:function(t,e,a){"use strict";a.d(e,{Ai:function(){return _},HV:function(){return k},IG:function(){return o},JC:function(){return S},Ks:function(){return h},LP:function(){return m},M6:function(){return N},MC:function(){return c},Ne:function(){return p},Ps:function(){return w},QQ:function(){return E},SE:function(){return v},Tx:function(){return d},WZ:function(){return u},Xc:function(){return g},Z2:function(){return j},cG:function(){return s},cT:function(){return y},ch:function(){return x},de:function(){return f},e_:function(){return I},mi:function(){return A},ox:function(){return r},r7:function(){return l},zK:function(){return b}});var n=a(92015),i=a(79235);a(34155);let o=async(t,e,a)=>{let{email:o,password:l,mobile_phone:c,signup_country_id:s,roles:r,username:u,user_store:d}=t;await n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/email/signup"),{email:o,password:l,mobile_phone:c,signup_country_id:s,roles:r,username:u,user_store:d}).then(function(t){e(t),console.log("\uD83D\uDE80 ~ file: index.js ~ line 33 ~ res",t),i.h.dispatch({type:"USER_NAME",action:t}),localStorage.setItem("USER_DATA_STORAGE",JSON.stringify({userData:t}))}).catch(function(t){a(t)})},l=async(t,e,a)=>{await n.b.post("".concat("http://65.1.197.155:81","/").concat("abraa-backend-sms","/public/api/v1/otp/verification_code"),{phoneNumber:"".concat(t),sid:"VAfddf1d6ae7e176a6a7bfc4f0e0855c52",channel:"whatsapp"}).then(function(t){e(t),i.h.dispatch({type:"SESSION_INFO",action:t})}).catch(function(t){a(t)})},c=async(t,e,a)=>{let{country:i}=t;await n.b.post("https://countriesnow.space/api/v0.1/countries/cities",{country:i}).then(function(t){let{data:a}=t;e(a)}).catch(function(t){a(t)})},s=async(t,e)=>{await n.b.get("".concat("abraa-backend-users","/public/api/v1/cities")).then(function(e){let{data:a}=e;t(a)}).catch(function(t){e(t)})},r=async(t,e)=>{await n.b.get("https://countriesnow.space/api/v0.1/countries").then(function(e){let{data:a}=e;t(a)}).catch(function(t){e(t)})},u=async(t,e)=>{await n.b.get("".concat("http://65.1.197.155:81","/").concat("abraa-backend-users","/public/api/v1/countries")).then(function(e){let{data:a}=e;t(a)}).catch(function(t){e(t)})},d=(t,e,a)=>{let{mobile:o,password:l}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/login"),{mobile_phone:o,password:l}).then(function(t){var a;e(t),i.h.dispatch({type:"NAME",action:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.username}),i.h.dispatch({type:"USER_NAME",action:t}),localStorage.setItem("USER_DATA_STORAGE",JSON.stringify({userData:t}))}).catch(function(t){a(t)})},p=(t,e,a)=>{let{mobile:o,password:l}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/email/login"),{email:o,password:l}).then(function(t){var a;e(t),i.h.dispatch({type:"NAME",action:null==t?void 0:null===(a=t.data)||void 0===a?void 0:a.username}),i.h.dispatch({type:"USER_NAME",action:t}),localStorage.setItem("USER_DATA_STORAGE",JSON.stringify({userData:t}))}).catch(function(t){a(t)})},v=(t,e)=>{let{mobile:a}=t;n.b.get("".concat("abraa-backend-users","/public/api/v1/auth/email/sendResetPasswordToken/").concat(a)).then(function(t){e(t)})},h=(t,e)=>{let{password:a,confirmPassword:i,pid:o}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/email/resetPassword"),{confirm_password:i,password:a,reset_password_token:o}).then(function(t){e(t)})},b=(t,e)=>{let{password:a,confirmPassword:i,id_token:o}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/resetPasswordUsingOTP "),{confirm_password:i,password:a,id_token:o}).then(function(t){e(t)})},f=()=>{localStorage.setItem("USER_DATA_STORAGE",JSON.stringify({userData:null}))},g=(t,e)=>{let{idToken:a}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/auth/mobile_phone/verify"),{id_token:a}).then(function(t){e(t)})},m=(t,e,a)=>{let{pin:o,sessionInfo:l}=t;n.b.post("".concat("http://65.1.197.155:81","/").concat("abraa-backend-sms","/public/api/v1/otp/verifyPhoneNumber"),{code:o,sessionInfo:l}).then(function(t){e(t),i.h.dispatch({type:"ID_TOKEN",action:null==t?void 0:t.data})}).catch(function(t){a(t)})},_=(t,e,a)=>{n.b.get("".concat("abraa-backend-users","/public/api/v1/users/profile"),{headers:{Authorization:"Bearer ".concat(t)}}).then(function(t){e(t)}).catch(function(t){a(t)})},A=(t,e,a)=>{let{token:i,userData:o}=t;n.b.post("".concat("abraa-backend-users","/public/api/v1/users/update"),o,{headers:{Authorization:"Bearer ".concat(i)}}).then(function(t){e(t)})},x=(t,e,a)=>{n.b.get("".concat("abraa-backend-users","/public/api/v1/users/check_existing_email/").concat(t)).then(function(t){e(t)}).catch(function(t){a(t)})},y=(t,e,a)=>{let{file_name:i,file_path:o}=t;n.b.post("https://stagingacp.abraa.com/api/upload-file",{file_name:i,file_path:o}).then(function(t){e(t)}).catch(function(t){a(t)})},S=(t,e)=>{var a,o,l,c;let s,{limit:r,page:u,sort:d,filter:p}=t;null===(a=i.h.getState().user)||void 0===a||a.role_id,s=null===(o=JSON.parse(localStorage.getItem("USER_DATA_STORAGE")))||void 0===o?void 0:null===(l=o.userData)||void 0===l?void 0:null===(c=l.data)||void 0===c?void 0:c.access_token,n.b.get("".concat("http://65.1.197.155:81","/").concat("abraa-backend-users","/public/api/v1/users/my_kyc_levels"),{headers:{Authorization:"Bearer ".concat(s)},params:{limit:r,page:u,sort:d,filter:p,datatables:!0}}).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})},k=(t,e)=>{var a,i,o;let l;l=null===(a=JSON.parse(localStorage.getItem("USER_DATA_STORAGE")))||void 0===a?void 0:null===(i=a.userData)||void 0===i?void 0:null===(o=i.data)||void 0===o?void 0:o.access_token,n.b.get("".concat("http://65.1.197.155:81","/").concat("abraa-backend-users","/public/api/v1/attributes/kyc_extra_fields_of_kyc/").concat(t),{headers:{Authorization:"Bearer ".concat(l)}}).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})},w=(t,e,a)=>{var i,o,l;let c;console.log("\uD83D\uDE80 ~ file: index.js:381 ~ data",t),c=null===(i=JSON.parse(localStorage.getItem("USER_DATA_STORAGE")))||void 0===i?void 0:null===(o=i.userData)||void 0===o?void 0:null===(l=o.data)||void 0===l?void 0:l.access_token,n.b.post("".concat("http://65.1.197.155:81","/").concat("abraa-backend-users","/public/api/v1/attribute_values/save"),{attribute_values:[t]},{headers:{Authorization:"Bearer ".concat(c)}}).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})},j=(t,e,a)=>{n.b.get("/".concat("abraa-backend-stores-products","/public/api/v1/attributes/category/566")).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})},E=(t,e)=>{n.b.get("/".concat("abraa-backend-stores-products","/public/api/v1/categories/roots")).then(function(e){let{data:a}=e;t(a)}).catch(function(t){})},N=(t,e,a)=>{let i=t||"undefined";"undefined"!==i&&n.b.get("/".concat("abraa-backend-stores-products","/public/api/v1/categories/filter/").concat(i)).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})},I=(t,e,a)=>{n.b.get("/".concat("abraa-backend-stores-products","/public/api/v1/categories/category_sons/").concat(t)).then(function(t){let{data:a}=t;e(a)}).catch(function(t){})}},92015:function(t,e,a){"use strict";a.d(e,{b:function(){return u}});var n=a(9669),i=a.n(n),o=a(80129),l=a.n(o),c=a(79235),s=a(40782);function r(t){let e=0;return"+"===t?e=1:"-"===t&&(e=(e=-1)>0?e:0),{c:0,n:e}}let u=i().create({baseURL:"".concat("http://65.1.197.155:81"),headers:{dev:!0}});u.interceptors.request.use(function(t){return!0!==t.silent&&r("+").c,t.params&&(t.paramsSerializer=t=>l().stringify(t)),t.data&&t.noStringify,t},function(t){return Promise.reject(t)}),u.interceptors.response.use(function(t){return!0!==t.config.silent&&(r("-").n,t.data.message&&t.data.message),t.data},function(t){if(!0!==t.config.silent&&r("-").n,t.response){if(!0!==t.config.silent&&""!==t.response.data.error){var e;e=t.response.data.error_code,t.config,"USR_UNAUTHENTICATED"===e&&(c.h.dispatch(_logout()),_historyPush("/"),window.location.reload()),!t.response.data.message.includes("No query")&&t.response.data.message&&(0,s.Am)(t.response.data.message)}}else t.request?t.request._response:t.sync||t.offline;return Promise.reject(t.response)})},24654:function(){}}]);